<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="description" content="" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- The above 4 meta tags *must* come first in the head; any other head content must come *after* these tags -->

    <!-- Title  -->
    <title>Vertex</title>

    <!-- Favicon  -->
    <link rel="icon" href="/img/core-img/favicon.ico" />

    <!-- Core Style CSS -->
    <link rel="stylesheet" href="/css/core-style.css" />

    <style>
        .filter-section {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
        }

        .filter-section h3 {
            margin-top: 0;
        }

        .filter-section h4 {
            margin-top: 0.5em;
        }

        .filter-category .category-btn {
            margin-right: 5px;
        }

        .filter-slider input {
            width: 100%;
        }

        .filter-color select,
        .filter-size select {
            width: 100%;
            margin-top: 5px;
            padding: 5px;
        }

        .apply-btn {
            margin-top: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            padding: 8px 12px;
            cursor: pointer;
        }

        .apply-btn:hover {
            background-color: #0056b3;
        }

        .radio-label {
            padding: 10px 15px;
            margin: 2px;
            border-radius: 25px;
            /* Adjust the border-radius for the capsule shape */
            cursor: pointer;
            transition: background-color 0.3s ease;
            background-color: #fff;
            /* Blue for unselected state */
            color: #000;
            border: 1px solid #000;
        }
    </style>
</head>

<body>
    <!-- ##### Header Area Start ##### -->
    <%- include("./partials/publicNavbar") %>
        <!-- ##### Header Area End ##### -->

        <!-- ##### Breadcumb Area Start ##### -->
        <div class="breadcumb_area bg-img" style="background-image: url(img/bg-img/breadcumb.jpg)">
            <div class="container h-100">
                <div class="row h-100 align-items-center">
                    <div class="col-12">
                        <div class="page-title text-center">
                            <h2>Search</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ##### Breadcumb Area End ##### -->


        <!-- ##### Shop Grid Area Start ##### -->
        <section class="shop_grid_area section-padding-80">
            <div class="container">
                <div class="row">

                    <div class="col-12 ">
                        <div class="shop_grid_product_area">
                            <div class="row">
                                <div class="col-12">
                                    <div class="product-topbar d-flex align-items-center justify-content-between">
                                        <!-- Total Products -->
                                        <div class="total-products">
                                            <!-- <p><span>186</span> products found</p> -->
                                        </div>
                                        <!-- Sorting -->
                                        <div class="product-sorting d-flex">
                                            <p>Sort by:</p>
                                            <select name="sortBy" onchange="updateURL()" id="sortBySelect">
                                                <option value="default">None</option>
                                                <option value="lowToHigh">Price: Low to High</option>
                                                <option value="highToLow">Price: High to Low</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Single Product -->
                            <% if (products.length>0) { %>
                                <div class="row">
                                    <!-- Single Product -->
                                    <% if (products) { %>
                                        <% products.forEach(product=> { %>
                                            <div class="col-12 col-sm-6 col-lg-3">
                                                <div class="single-product-wrapper">
                                                    <!-- Product Image -->
                                                    <div class="product-img">
                                                        <a href="/product/<%= product._id %>">
                                                            <img src="/img/products/<%= product.images[0] %>" alt="" />
                                                            <!-- Hover Thumb -->
                                                            <img class="hover-img"
                                                                src="/img/products/<%= product.images[1] %>" alt="" />
                                                        </a>

                                                        <!-- Product Badge -->
                                                        <% if (product.discount) { %>
                                                            <div class="product-badge offer-badge">
                                                                <span>
                                                                    <%= product.discountPercent %> %
                                                                </span>
                                                            </div>
                                                            <% } else { %> ₹ <%= product.originalPrice %>
                                                                    <% } %>


                                                    </div>

                                                    <!-- Product Description -->
                                                    <div class="product-description">
                                                        <!-- <span>topshop</span> -->
                                                        <a href="/product/<%= product._id %>">
                                                            <h6>
                                                                <%= product.name %>
                                                            </h6>
                                                        </a>

                                                        <p class="product-price">
                                                            <% if (product.discount) { %>
                                                                <span class="old-price">
                                                                    ₹ <%= product.originalPrice %>
                                                                </span>
                                                                ₹ <%= product.discountedPrice %>
                                                                    <% } else { %> ₹ <%= product.originalPrice %>
                                                                            <% } %>
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>

                                            <% }) %>
                                                <% } %>
                                </div>


                                <% } else { %>
                                    <div class="row justify-content-center">
                                        There is no product to display
                                    </div>
                                    <% } %>
                                        <!-- Pagination -->
                                        <nav aria-label="navigation">
                                            <ul class="pagination mt-50 mb-70 justify-content-center">
                                                <li class="page-item"><a class="page-link" href="#"><i
                                                            class="fa fa-angle-left"></i></a>
                                                </li>
                                                <li class="page-item"><a class="page-link" href="#">1</a></li>
                                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                                <li class="page-item"><a class="page-link" href="#">...</a></li>
                                                <li class="page-item"><a class="page-link" href="#">21</a></li>
                                                <li class="page-item"><a class="page-link" href="#"><i
                                                            class="fa fa-angle-right"></i></a>
                                                </li>
                                            </ul>
                                        </nav>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- ##### Shop Grid Area End ##### -->

        <!-- ##### Footer Area Start ##### -->
        <%- include("./partials/user-footer") %>
            <!-- ##### Footer Area End ##### -->




            <!-- jQuery (Necessary for All JavaScript Plugins) -->
            <script src="/js/jquery/jquery-2.2.4.min.js"></script>
            <!-- Popper js -->
            <script src="/js/popper.min.js"></script>
            <!-- Bootstrap js -->
            <script src="/js/bootstrap.min.js"></script>
            <!-- Plugins js -->
            <script src="/js/plugins.js"></script>
            <!-- Classy Nav js -->
            <script src="/js/classy-nav.min.js"></script>
            <!-- Active js -->
            <script src="/js/active.js"></script>


            <script>

                function updateURL() {
                    const sortBy = document.getElementById("sortBySelect").value;
                    const url = new URL(window.location.href);
                    const queryParams = url.searchParams;

                    // Update or add the "sort" parameter
                    queryParams.set("sort", sortBy);

                    // Remove the trailing ampersand if present
                    if (queryParams.toString().endsWith('&')) {
                        queryParams.delete(queryParams.keys().next().value);
                    }

                    console.log(url)
                    window.location.href = url

                }



                window.addEventListener('DOMContentLoaded', (event) => {
                    document.getElementById("applyFilter").addEventListener("click", filter)
                });
            </script>

</body>

</html>